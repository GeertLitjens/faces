(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t){},109:function(e,t){},142:function(e,t){},143:function(e,t){},189:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(87),s=(a(97),a(19)),i=a(6),l=a.n(i),u=a(11),o=a(14),m=a(36),p=a(20),f=a(18),h=a(21),d=a(91),v=function(){return r.a.createElement("footer",{className:"mt3 py2 h6 border-top border-silver"},r.a.createElement("p",null,"Made by @brensudol, adapted by Geert Litjens"),r.a.createElement("a",{href:"http://github.com/geertlitjens/metastaticcancercellclassifier"},"Code on GitHub"))},b=function(e){e.children;return r.a.createElement("header",{className:"my2"},r.a.createElement("h1",{className:"my1 h2"},"Kankercellendetector"),r.a.createElement("p",{className:"m0"},"Voeg hier plaatjes toe en zie welke plaatje tumorcellen bevatten"))},g=function(e){var t=e.bg,a=void 0===t?"light":t,n=e.color,c=void 0===n?"black":n,s=e.children;return r.a.createElement("div",{className:"my1 p1 h5 bg-".concat(a," ").concat(c," rounded")},s)},y=a(90),k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(y.a)(".".concat(t,"%"))(e)},E=function(e){var t=e.total,a=e.cancer;return r.a.createElement(g,{bg:"yellow"},r.a.createElement("strong",null,"Results:"),r.a.createElement("strong",null,t)," ",t>1?"plaatjes":"plaatje"," geclassficeerd,"," ",r.a.createElement("strong",null,a," (",k(a/t,0),")")," ",1===a?"bevat er ":"bevatten er "," kankercellen.")},j=function(e){var t=e.patches,a=e.classifications;return r.a.createElement("div",null,r.a.createElement(E,{total:t.length,cancer:a.filter(function(e){return"Kankercellen"===e[0].label}).length}),r.a.createElement("div",{className:"flex flex-wrap mxn1 mt1"},t.map(function(e,t){return r.a.createElement("div",{key:t,className:"col col-4 sm-col-3 md-col-5th px1"},r.a.createElement("div",{className:"mb1 border border-silver rounded overflow-hidden"},r.a.createElement("img",{src:e.src,alt:"patch ".concat(t+1),className:"block col-12"}),r.a.createElement("div",{className:"p05 fs-tiny"},r.a.createElement("div",{key:t,className:"flex justify-between"},r.a.createElement("div",{className:"mr05 truncate"},a[t][0].label),r.a.createElement("div",{className:"bold"},k(a[t][0].value))))))})))},x=a(89),w=a.n(x),O=a(16),N=O.d(127.5);function S(e,t){return O.e(function(){var a=O.a(e),n=a.toFloat().sub(N).div(N);if(a.shape[0]===t&&a.shape[1]===t)return n;if(a.shape[0]<t||a.shape[1]<t)return O.b.resizeBilinear(n,[t,t],!0);if(a.shape[0]>=t||a.shape[1]>=t){var r=Math.floor((a.shape[0]-299)/2),c=Math.floor((a.shape[1]-299)/2);r=r<0?0:r,c=c<0?0:c;var s=a.shape[0]>299?299:a.shape[0],i=a.shape[1]>299?299:a.shape[1];return n.slice([r,c,0],[s,i,3])}})}var I=function(){function e(t){var a=t.path,n=t.imageSize,r=t.classes,c=t.isGrayscale,s=void 0!==c&&c;Object(o.a)(this,e),this.path=a,this.imageSize=n,this.classes=r,this.isGrayscale=s}return Object(m.a)(e,[{key:"load",value:function(){var e=Object(u.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.c(this.path);case 2:this.model=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"imgToInputs",value:function(){var e=Object(u.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t,this.imageSize);case 2:return a=e.sent,e.abrupt("return",a.reshape([1].concat(Object(s.a)(a.shape))));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"classify",value:function(){var e=Object(u.a)(l.a.mark(function e(t){var a,n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[],n=0;case 2:if(!(n<t.length)){e.next=10;break}return e.next=5,this.classifySingleImage(t[n]);case 5:r=e.sent,a.push(r);case 7:++n,e.next=2;break;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"classifySingleImage",value:function(){var e=Object(u.a)(l.a.mark(function e(t){var a,n,r,c=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.imgToInputs(t);case 2:return a=e.sent,n=O.e(function(){return c.model.predict(a)}),a.dispose(),e.next=7,this.getTopClass(n);case 7:return r=e.sent,n.dispose(),a=null,n=null,e.abrupt("return",r);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTopClass",value:function(){var e=Object(u.a)(l.a.mark(function e(t){var a,n,r,c=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data();case 2:for(a=e.sent,n=[],r=0;r<a.length;r++)n.push({value:a[r],index:r});return n=n.sort(function(e,t){return t.value-e.value}).slice(0,1),e.abrupt("return",n.map(function(e){return{label:c.classes[e.index],value:e.value}}));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),z={0:"Normale cellen",1:"Kankercellen"},C=function(e){function t(){return Object(o.a)(this,t),Object(p.a)(this,Object(f.a)(t).call(this,{path:"".concat("/metastaticcellclassifier/index.html","/static/models/cancer/model.json"),imageSize:299,classes:z}))}return Object(h.a)(t,e),t}(I),B=function(e){return new Promise(function(t){var a=new FileReader;a.onload=function(){return t({file:e,url:a.result})},a.readAsDataURL(e)})},M=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(p.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={ready:!1,loading:!1,imgs:[],imgUrls:[w.a],classifications:[]},a.handleUpload=function(){var e=Object(u.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:n=[],r=0;case 4:if(!(r<t.length)){e.next=13;break}return e.t0=n,e.next=8,B(t[r]);case 8:e.t1=e.sent.url,e.t0.push.call(e.t0,e.t1);case 10:++r,e.next=4;break;case 13:a.setState({imgUrls:n,loading:!0,classifications:[]});case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.initModels()}},{key:"initModels",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new C,e.next=3,t.load();case 3:this.models={cancer:t},this.setState({ready:!0},this.initPredict);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initPredict",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=Object(s.a)(document.getElementsByClassName("images"))).length){e.next=3;break}return e.abrupt("return");case 3:if(t.every(function(e){return e.complete})){e.next=6;break}return e.abrupt("return");case 6:this.setState({loading:!0}),this.analyzeImages();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleImgLoaded",value:function(){var e=Object(s.a)(document.getElementsByClassName("images"));0!==e.length&&(e.every(function(e){return e.complete})&&(this.setState({loading:!0}),this.analyzeImages()))}},{key:"analyzeImages",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})});case 2:if(this.models){e.next=4;break}return e.abrupt("return");case 4:return t=Object(s.a)(document.getElementsByClassName("images")),e.next=7,this.models.cancer.classify(t);case 7:a=e.sent,this.setState({loading:!1,classifications:a});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.ready,n=t.imgUrls,c=t.loading,i=t.classifications,l=a&&!c&&n&&!i.length;return r.a.createElement("div",{className:"px2 mx-auto container app"},r.a.createElement(b,null),r.a.createElement("main",null,r.a.createElement("div",{className:"py1"},r.a.createElement(d.a,{className:"btn btn-small btn-primary btn-upload bg-black h5",accept:"image/jpeg, image/png",multiple:!0,disabled:!a,onDrop:this.handleUpload},"Probeer een plaatje!")),r.a.createElement("div",{className:"relative"},n&&n.map(function(t,a){return r.a.createElement("img",{style:{padding:"5px"},key:a,className:"images",onLoad:e.handleImgLoaded.bind(e),src:t,alt:""})})),!a&&r.a.createElement(g,null,"Slimme computer laden..."),c&&r.a.createElement(g,null,"Plaatje bekijken..."),l&&r.a.createElement(g,{bg:"red",color:"white"},r.a.createElement("strong",null,"Sorry!")," Er kon niks worden geclassificeerd."),i.length>0&&r.a.createElement(j,{patches:Object(s.a)(document.getElementsByClassName("images")),classifications:i})),r.a.createElement(v,null))}}]),t}(n.Component);a(189);window.appInstance=Object(c.render)(r.a.createElement(M,null),document.getElementById("root"))},89:function(e,t,a){e.exports=a.p+"static/media/kankercellen_000.694dcd0a.jpg"},92:function(e,t,a){e.exports=a(191)}},[[92,2,1]]]);
//# sourceMappingURL=main.8a418872.chunk.js.map